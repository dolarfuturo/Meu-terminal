import streamlit as st
import yfinance as yf

st.set_page_config(page_title="Terminal", layout="wide")
st.title("üè¶ MONITOR DE MERCADO")

# Parte 1: D√≥lar
try:
    dados = yf.download("USDBRL=X", period="1d", interval="1m", progress=False)
    spot = dados['Close'].iloc[-1]
    st.metric("D√ìLAR SPOT", f"R$ {spot:.4f}")
except:
    st.write("Aguardando cota√ß√£o do d√≥lar...")

# Parte 2: Outros Ativos
st.write("---")
st.write("### Varia√ß√µes")

def mostrar(nome, ticker):
    try:
        d = yf.download(ticker, period="2d", progress=False)['Close']
        atual = d.iloc[-1]
        anterior = d.iloc[-2]
        variacao = ((atual - anterior) / anterior) * 100
        st.metric(nome, f"{atual:.2f}", f"{variacao:+.2f}%")
    except:
        st.write(f"Erro no {nome}")

c1, c2 = st.columns(2)
with c1:
    mostrar("EWZ (Bolsa BR)", "EWZ")
with c2:
    mostrar("DXY (D√≥lar Global)", "DX-Y.NYB")
